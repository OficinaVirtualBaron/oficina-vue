"use strict";(self["webpackChunkoficina_vue"]=self["webpackChunkoficina_vue"]||[]).push([[259],{6259:function(t,e,o){o.r(e),o.d(e,{default:function(){return j}});var s=o(3396),n=o(7139);const i={class:"main-container"};function a(t,e,o,a,u,l){const r=(0,s.up)("FormularioComponent");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("h1",null,(0,n.zw)(this.$route.params.formularioTitle),1),(0,s.Wm)(r,{questionProp:u.preguntas,length:this.length},null,8,["questionProp","length"])])}o(7658);var u=o(9242),l=o(1661);const r=t=>((0,s.dD)("data-v-a8029646"),t=t(),(0,s.Cn)(),t),p={class:"question"},c=r((()=>(0,s._)("p",null,"Completar las preguntas para cada tramite",-1))),d={class:"spinner-border",role:"status"},h=r((()=>(0,s._)("span",null,"cargando rey",-1))),q=[h],g={class:"option-container"},m=["id","name","type","value"],y=["for"],b=r((()=>(0,s._)("br",null,null,-1))),v=r((()=>(0,s._)("br",null,null,-1))),_={class:"form-outline"},I=["type"],f={key:1,class:"file-container"},w=r((()=>(0,s._)("img",{src:l,alt:""},null,-1))),P=r((()=>(0,s._)("hr",null,null,-1))),k=["type"],x={class:"error"},C={class:""};function D(t,e,o,i,a,l){return(0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("h4",null,(0,n.zw)(o.questionProp[0].question[this.paso].title),1),c,(0,s.wy)((0,s._)("div",d,q,512),[[u.F8,this.loading]]),(0,s.wy)((0,s._)("form",g,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.questionProp[0].question,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"option",key:i},["radio"===o.questionProp[0].question[this.paso].question_options[i].type?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:0,id:i,name:i,type:o.questionProp[0].question[this.paso].question_options[i].type,value:i,"onUpdate:modelValue":e[0]||(e[0]=t=>this.selected=t)},null,8,m)),[[u.YZ,this.selected]]):(0,s.kq)("",!0),(0,s._)("label",{class:"option-text",for:i},(0,n.zw)(o.questionProp[0].question[0].question_options[i].title)+" ",9,y),b,(0,s._)("label",null,[(0,s._)("p",null,(0,n.zw)(o.questionProp[0].question[this.paso].question_options[i].description),1)]),v,(0,s._)("div",_,["radio"!=o.questionProp[0].question[this.paso].question_options[i].type&&"file"!=o.questionProp[0].question[this.paso].question_options[i].type?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:0,class:"form-control",type:o.questionProp[0].question[this.paso].question_options[i].type,"onUpdate:modelValue":e[1]||(e[1]=t=>this.textInput=t)},null,8,I)),[[u.YZ,this.textInput]]):(0,s.kq)("",!0)]),"file"===o.questionProp[0].question[this.paso].question_options[i].type?((0,s.wg)(),(0,s.iD)("div",f,[w,P,(0,s.wy)((0,s._)("input",{accept:".pdf",type:o.questionProp[0].question[this.paso].question_options[i].type,"onUpdate:modelValue":e[2]||(e[2]=t=>this.textInput=t)},null,8,k),[[u.YZ,this.textInput]])])):(0,s.kq)("",!0)])))),128)),(0,s.wy)((0,s._)("p",x," Debe seleccionar una opcion para continuar ",512),[[u.F8,0==a.validation]])],512),[[u.F8,!a.modal]]),(0,s._)("div",C,[this.paso+1<this.length?((0,s.wg)(),(0,s.iD)("input",{key:0,class:"btn btn-secondary",type:"button",value:"Siguiente",onClick:e[3]||(e[3]=t=>l.preNext())})):(0,s.kq)("",!0),(0,s._)("input",{class:"m-2 btn btn-secondary",type:"button",value:"Anterior",onClick:e[4]||(e[4]=e=>t.back())})]),this.paso+1==this.length?((0,s.wg)(),(0,s.iD)("input",{key:0,class:"btn btn-success m-1",type:"button",value:"Submitt",onClick:e[5]||(e[5]=(...t)=>l.submitt&&l.submitt(...t))})):(0,s.kq)("",!0),(0,s._)("input",{class:"btn btn-success m-1",type:"button",value:"Verpdf",onClick:e[6]||(e[6]=(...t)=>l.ver&&l.ver(...t))})])}var F=o(70),S=o(1164),z=o(65);let Z={userId:1,categoryId:5,statusId:1,questions:[]};var N={name:"FormularioComponent",props:{length:Number,question_id:Number,questionProp:{title:String,type:String,question:Array}},data(){return{modal:!1,paso:0,validation:null,loading:!1,textInput:"",selected:1,submitted:!1}},created(){console.log(this.questionProp[0]),console.log(this.questionProp[0].question)},methods:{...(0,z.nv)(["saveP"]),preNext(){0==this.selected&&""==this.textInput?this.validation=!1:(0==this.selected&&""!=this.textInput||0!=this.selected&&""==this.textInput)&&this.next()},next(){let t=this.selected,e="";""!=this.textInput?(e=this.textInput,t=1):e=this.questionProp[0].question[this.paso].question_options[t].title,console.log(t);let o={question:this.questionProp[0].question[this.paso].id,options:[{questionOption:this.questionProp[0].question[this.paso].question_options[t].id,answer:e}]};console.log(o),console.log(Z),Z.questions.push(o),this.selected=0,this.textInput="",this.validation=!0,this.paso++,console.log(this.paso+"rey")},submitt(){if(this.preNext(),console.log(Z),this.validation){this.loading=!0,this.modal=!0;const t=F.ZP.create({baseURL:"//localhost:3000/",withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});t.post("/oficina/procedures/submit-procedure",{userId:Z.userId,categoryId:Z.categoryId,statusId:Z.statusId,questions:Z.questions}).then((t=>{201==t.status&&(this.submitted=!0,this.$router.replace({path:"/prueba"})),console.log(t)})).catch((t=>{console.log(t)})),this.loading=!1}},ver(){var t=new S.jsPDF;t.setTextColor(120,12,3),t.setFontSize(22),t.text(20,20,`${Z.questions[0].options[0].answer}`),t.setTextColor(20),t.setFontSize(16),t.text(20,30,"This is some normal sized text underneath."),t.save("a4.pdf")}}},T=o(89);const U=(0,T.Z)(N,[["render",D],["__scopeId","data-v-a8029646"]]);var V=U,$={data(){return{category:this.$route.params,questions:[{question_id:9,title:"Tipo De Negocio",type:"radio",question:{2:["Voy a realizar un trabajo independiente","Venta de productos o servicios con o sin empleado.",1],3:["Como miembro de una cooperativa","La cooperativa debe estar registrada en AFIP y tenés que tener la CUIT.",2],4:["Como trabajador promovido","Opción especial para trabajadores en condiciones precarias.",5]}},{question_id:5,title:" Ingreso anual bruto",type:"number",question:{1:["Ingrese el número sin comas:"," ",4]}},{question_id:6,title:" Subir constancia de AFIP",type:"file",question:{1:["Seleccione su constancia de AFIP:","Solo en formato pdf digital o escaneado.",5]}}],length:null,preguntas:[]}},components:{FormularioComponent:V},created(){console.log(localStorage.getItem("token"));const t=F.ZP.create({baseURL:"//localhost:3000/",withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});t.get("/oficina/procedures/template/"+this.$route.params.formularioId).then((t=>{console.log(t.data);let e=t.data;this.length=e.question.length,this.preguntas.push(e)})).catch((t=>{console.log(t)}))},methods:{back(){this.$router.go(-1)}}};const A=(0,T.Z)($,[["render",a],["__scopeId","data-v-462ddeb8"]]);var j=A},1661:function(t,e,o){t.exports=o.p+"img/tramite-logo.2e93d658.svg"}}]);
//# sourceMappingURL=259.508dcb0f.js.map